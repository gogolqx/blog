---
layout: post
title: Win10 Ubuntu 双系统笔记
categories: Linux
tags: Linux
---

本文介绍了在 Windows 已经安装的情形下，如何增加一个 Ubuntu 的系统。启动方案 UEFI，不使用 EasyBCD 软件。 

<!-- more -->

# Win10 Ubuntu 双系统笔记

## 序

如果你尚未安装 Windows 10，请参考这篇文章：[Ubuntu StackExchange](https://askubuntu.com/questions/666631/how-can-i-dual-boot-windows-10-and-ubuntu-on-a-uefi-hp-notebook)。它会指导你先安装 Ubuntu 再安装 Windows。

但本文的背景是：已经安装了 Windows 10，想要新增一个 Ubuntu 系统。

你需要的准备：

- 下载 UltraISO 与 EasyBCD 软件。
- 写入好 Ubuntu 的**可引导** USB 设备。  
- 足够的磁盘空间。建议至少在 40 GB 以上。
- （建议）备份你的 Windows 系统中重要的文件。

## 步骤

### 一、备份

拷贝到你的外部存储设备（比如移动硬盘）来备份你的重要文件。

### 二、禁用快速启动

*此步骤需要管理员权限。*

Ubuntu 的引导菜单叫做 GRUB。如果你不禁用快速启动，GRUB 就不能正常地检测到 Windows 10；这会使你想在启动菜单中选择进入哪个系统的想法破灭（因为只有 Ubuntu）。

1. 右键左下角 Win 徽标，选择“控制面板”，以打开控制面板。
2. 选择“电源选项”（位于“硬件和声音”中），点选左侧“选择电源按钮的功能”。
3. 点击顶部“更改当前不可用的设置”。
4. 取消勾选“启用快速启动（推荐）”。
5. 保存修改。

### 三、划分磁盘

在安装 Ubuntu 前，你需要为其划分磁盘，确保它不会覆写现有的 Windows。

通常的做法是：

1. 右键“此电脑”，选择“管理”。
2. 点击“磁盘管理”。
3. 在某个分区（**警告：该分区应无数据！**）上右键，点击“删除卷”。
4. 该分区即作为 Ubuntu 的硬盘区。如果其容量过大，你也可以选择分割它。
5. 如果你愿意折腾，可以从固态硬盘中仿上划分一片 256~512 MB 的区域供挂载 /boot 使用。

### 四、制作引导 U 盘

1. 插入空白 U 盘。若不是空白的，可以先快速格式化。
2. 使用 UltraISO 软件，打开下载好的 Ubuntu 的 iso 文件。此时，左上角“光盘目录”应显示：“可引导光盘”。
3. 选择菜单栏的“启动”，“写入硬盘镜像”。
4. 按照USB HDD+ 模式写入即可。

### 五、关闭安全启动

关机。进入 Bios，找到 Security Boot 将其关闭。

### 六、安装与分区

插入 U 盘并重启，进入 Boot Menu（各品牌型号的快捷键不同），选择 U 盘启动。

如果你是双显卡用户（独显+核显），可能会卡在 logo 界面；这是因为显卡驱动的问题。记得在之前的引导列表时，光标放在“Install Ubuntu”上，然后按“e”进入 Linux 选项界面。找到以 “linux” 开头的一行（该行可能中途换行），在其末尾，空一格后输入“nouveau.modeset=0”。再按 F10 就可以正常 boot。

正常 boot 后，在“安装类型”界面，选择最下方的**其他选项**。

在磁盘分区界面，确定你预留的磁盘空白位置。依次新建分区：  

- 根分区：挂载点 “/” 的主分区，ext4，一般 20 GB或更多。
- Swap 分区：无挂载点。一般给同等物理内存大小，比如 8G。
- boot 分区：挂载点“/boot”的逻辑分区。一般不小于 256MB，比如 512 MB。这部分可以考虑放置在固态上。
- home 分区：挂载点“/home”的逻辑分区，个人软件与文件。分配尽量多的空间。

### 七、显卡驱动修复

安装完成后重启，通过 Boot Menu 进入 第一个 Ubuntu 启动。U 盘可以拔除。

你同样需要 “nouveau.modeset=0” 帮助你正常 boot，然后你会抵达桌面。点击左侧的齿轮图标“设置”，找到“更新”的“其他应用程序更新”选项卡，里面应有 Nvidia 驱动。这时点选对应官方驱动即可。之后重启电脑，再使用一次 “nouveau.modeset=0” 进入系统完成官方驱动安装，此后再进行启动就无需再输入该命令。

### 八、结语

1. 本文没有使用 EasyBCD （因为该软件很陈旧了），开机不会有选择系统的菜单，会自动进入 Win10。如果想进入 Ubuntu，需要配合 Boot Menu 的快捷键。

2. 重启后，可进入 BIOS 将安全启动重新开启（但这可能导致 Ubuntu 中一些第三方软件出现问题）。

3. 甚至你也可以开启快速启动，但会导致在 Ubuntu 下检测不到 Windows 部分的硬盘。如果不开启快速启动，Windows 文件磁盘在 Ubuntu 中能够以类似外部存储的形式进行访问与弹出。

